<!DOCTYPE html>

<head>
    <title> CART 263 WINTER 2026</title>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Roboto:ital,wght@0,100..900;1,100..900&display=swap"
        rel="stylesheet">

    <link rel="stylesheet" href="css/style.css">
      <link href="css/themes/prism.css" rel="stylesheet" />
  

</head>

<body>
    <header>
        <h1> CART 263 WINTER 2026</h1>

         <nav id = "cart263Nav"></nav>
        <script src = "js/loadNav.js"></script>
       <div class="inner-head">
                <h1>JSONANdFetch</h1>
            </div>
    </header>
    <main>

<section class="contents-notes">
<a href = "resources/FETCH-2026-START.zip">PLEASE DOWNLOAD THE STARTING FILES FROM HERE</a>

<h3>JSON </h3>
<ul>
<li>JSON stands for <span class = "customP">JavaScript Object Notation</span></li>
<li>JSON <span class = "customP">is a lightweight data-interchange format</span></li>
<li>JSON <span class = "customP">is "self-describing" and easy to understand</span></li>
<li>JSON <span class = "customP">is language independent</span></li> 
<li><span class = "customP">JavaScript Object Notation (JSON)</span> is a standard text-based format(a string) for representing <em>structured data</em> based on JavaScript object syntax. 
<li><span class = "customP">It is commonly used for transmitting data in web applications</span> (i.e sending some data from a server to a client, so that it can be displayed on a web page, or vice versa ...)</span></li>
<li><span class = "customP">It can also be used as a means for storing configurations, settings, data to be loaded into a program etc...</span></li>
<li>JSON exists as a STRING -> so it needs to be converted to a <span class = "customP">native JavaScript object</span> when you want to access the data.
<br>And Luckily: JavaScript provides a global <span class = "customP">JSON object</span> that has methods available for converting between the two.</li>
<li>The process of <span class = "customP">converting a JSON string to a native JavaScript object</span> is called <span class = "customP">parsing</span>.</li>
<li>The process of <strong>converting a native JavaScript object to a string</strong> so it can be transmitted across the network is called <span class = "customP">stringification</span>.</li>
</ul>
<h4>What JSON looks like</h4>
<p>JSON is a string whose format very much resembles JavaScript object literal format. <strong>You can include the same basic data types inside JSON as you can in a standard JavaScript object — strings, numbers, arrays, booleans, and other object literals</strong>.</p> 
<p><span class = "customP">You can then access the data inside it using the same dot/bracket notation as you would for JavaScript objects.</span></p>
<p>This allows you to <strong>construct a data hierarchy</strong>, all contained within a SINGLE string. Let's first look at an example of a JSON string - add to the <code> jsonOne.js</code> (linked to jsonReview.html):</p>
<pre data-line="1, 3, 5, 7, 9, 11, 13,15,17,19,21,23,25,27" class="language-javascript line-numbers">
<code>
let donut_as_json = {
    id: "0001",
    type: "donut",
    name: "Cake",
    image: "../images/donuts/b.png",
    flavours: [
      { id: "1001", type: "Regular" },
      { id: "1002", type: "Chocolate" },
      { id: "1003", type: "Blueberry" },
      { id: "1004", type: "Devil's Food" },
    ],

    toppings: [
      { id: "5001", type: "None" },
      { id: "5002", type: "Glazed" },
      { id: "5005", type: "Sugar" },
      { id: "5007", type: "Powdered Sugar" },
      { id: "5006", type: "Chocolate with Sprinkles" },
      { id: "5003", type: "Chocolate" },
      { id: "5004", type: "Maple" },
    ],
  };
  </code>
  </pre>
  <ul>
<li>JSON is purely a data format — it contains <span class = "customP">only properties, no methods</span>.</li>
<li>JSON requires <strong>double quotes</strong> to be used around strings and property names.</li> 
<li><strong>Single quotes are not valid.</strong>.</li>
</ul>
<p>We have two ways of accessing properties and values :just as is the case with other Java script objects:
  <br>  - using dot notation or bracket notation ...) Lets start with dot notation:</p>
<pre data-line="1, 3, 5, 7, 9, 11, 13,15,17,19,21,23,25,27" class="language-javascript line-numbers">
<code>
  let headingTag = document.createElement("h2");
  headingTag.classList.add("donut_name_class");
  document.getElementById("output_rev").appendChild(headingTag);
  headingTag.innerHTML = `Donut Name : <span>${donut_as_json.name}</span>`;
  </code>
</pre>
<p>If we want to access the array associated with the <code>flavours</code> label we can do the following:</p>
<pre data-line="1, 3, 5, 7, 9, 11, 13,15,17,19,21,23,25,27" class="language-javascript line-numbers">
<code>
 let flavoursArray = donut_as_json.flavours;
  //make a for loop and iterate
  for (flavour of flavoursArray) {
    console.log(flavour);
    let pTag = document.createElement("p");
    pTag.classList.add("donut_flavour_class");
    document.getElementById("output_rev").appendChild(pTag);
    pTag.innerHTML = `Donut flavour : <span>${flavour.type}</span>`;
  }
</code>
</pre>
<p>And ... if we want to access the toppings:</p>
<pre data-line="1, 3, 5, 7, 9, 11, 13,15,17,19,21,23,25,27" class="language-javascript line-numbers">
<code>
let toppingsArray = donut_as_json.toppings;
  for (topping of toppingsArray) {
    console.log(topping);
    let pTag = document.createElement("p");
    pTag.classList.add("donut_topping_class");
    document.getElementById("output_rev").appendChild(pTag);
    pTag.innerHTML = `Donut topping : <span>${topping}</span>`;
};
</code>
</pre>
<p>Finally let's say we have a JSON var that is an array of objects ...</p>
<pre data-line="1, 3, 5, 7, 9, 11, 13,15,17,19,21,23,25,27,29,31,33,35,37,39,41,43,45,47,49,51,53,55,57,59,61,63,65,67" class="language-javascript line-numbers">
<code>
   let donut_as_json_array = [
    {
      id: "0001",
      type: "donut",
      name: "Cake",
      image: "../images/donuts/b.png",
      flavours: [
        {
          id: "1001",
          type: "Regular",
        },
        {
          id: "1002",
          type: "Chocolate",
        },
        {
          id: "1003",
          type: "Blueberry",
        },
        {
          id: "1004",
          type: "Devil's Food",
        },
      ],
      toppings: [
        "None",
        "Glazed",
        "Sugar",
        "Powdered Sugar",
        "Chocolate with Sprinkles",
        "Chocolate",
        "Maple",
      ],
    },
    {
      id: "0002",
      type: "donut",
      name: "Raised",
      image: "../images/donuts/a.png",
      flavours: [
        {
          id: "1001",
          type: "Regular",
        },
      ],
      toppings: ["None", "Glazed", "Sugar", "Chocolate", "Maple"],
    },
    {
      id: "0003",
      type: "donut",
      name: "Old Fashioned",
      image: "../images/donuts/f.png",
      flavours: [
        {
          id: "1001",
          type: "Regular",
        },
        {
          id: "1002",
          type: "Chocolate",
        },
      ],
      toppings: ["None", "Glazed", "Chocolate", "Maple"],
    },
  ];    
 </code>
</pre>
<p>And to iterate through ... we just go through the array as we normally would ;)</p>
<pre data-line="1, 3, 5, 7, 9, 11, 13,15,17,19,21,23,25,27" class="language-javascript line-numbers">
<code>
  console.log(donut_as_json_array[0]);
  for (let i = 0; i < donut_as_json_array.length; i++) {
    let headingTag = document.createElement("h2");
    headingTag.classList.add("donut_name_class");
    document.getElementById("output_rev").appendChild(headingTag);
    headingTag.innerHTML = `Donut Name : <span>${donut_as_json_array[i].name}</span>`;
  }
  </code>
</pre>

<h3> LOADING A JSON FILE FROM AN EXTERNAL SOURCE </h3>
<p>Lets say that we are trying to access a JSON  file from an external source, and/or the data is stored in a separate file. 
<br>The <a href = "https://developer.mozilla.org/en-US/docs/Web/API/Fetch_API">FETCH API</a> is the preferable method to use when we want to read a 
JSON file either from <span class="customP">an external server or local file into our JavaScript file</span>.  
<br >NOTE: There are other methods for reading local JSON files into your JS file - > but that is beyond the scope of today's topic ;)</p>
<h4> CONSTRUCTING A FETCH REQUEST</h4>
<ul>
  <li>You start a Fetch Request with the <code>fetch</code> function and pass it a <strong>URL</strong> (the location for where the data resides) as an argument.</li>
<li>By default one will make a <code>request</code> for the resource, and the function will respond with a <code>promise</code>.</li>
<li> A <a href = "https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Promise">Promise </a> (which is a newish ->  now almost standard convention in JS) on a high level represents the <span class = "customP"> eventual fulfillment/failure of an asynchronous event (i.e. a request for a remote resource)</span>.</li>
<li>In the case of the <code>fetch()</code> - the resulting promise will automatically resolve to the <code> Response</code> object representing the server's response</li>
<li>You can then check the request status and extract the body of the response in various formats, including text and JSON, by calling the appropriate method on the response-> <code> text() or json()</code> </li>
</ul>
<p>Below is an example of a sample fetch request - & is it important to note: </p>
<ul>
<li>We execute the fetch request within a <code>try/catch clause</code> ... (recall when accessing the camera/microphone ;))</li>
<li>We need to use the <code>await</code> keyword BOTH for fetching and parsing because these are operations that may take some time... </li>
<li> AND we need to wrap the whole thing in an <code>async function</code>...</li>
</ul>

<pre data-line="1, 3, 5, 7, 9, 11, 13,15,17,19,21,23,25,27" class="language-javascript line-numbers">
<code>
window.onload = goFetch;
  async function goFetch(){
  try {
        let response = await fetch('https://my-horrible-webservice.com/data.json');
        let data = await response.json();
  }
  catch(err) { 
      console.log(err)
  }
}
</code>
</pre>
<h4> Make your own Fetch Request I </h4>
<p>Ok - lets access the JSON data stored in a file (is again the DONUTS... but now the data is stored in a SEPERATE FILE...)
<br/>Once we have successfully accessed the data on the client side - we will look at how we can <span class = "customP"> output the data as HTML and CSS...</span>. 
<br/>Use the starting html page <code>jsonAndFetch.html</code>. The js file linked is <code>jsonFetch.js</code>.
<br/> Add the following into the <code>async function</code></p>:
<pre data-line="1, 3, 5, 7, 9, 11, 13,15,17,19,21,23,25,27" class="language-javascript line-numbers">
<code>
try{

 let response = await fetch('../files/tests.json'); //response
 let parsedResultJS = await response.json();
 console.log(parsedResultJS)
}
catch(err){

    console.log(err)
}
</code>
</pre>
<ul>
<li> We are trying to access the tests.json file (an external source) </li>
<li>Upon success - we receive a result.. <span class = "customP"> we know the result needs to be parsed as json</span> - so we make a request for <span class = "customP">json formatted data</span> </li>
<li> Upon parsing success  - we log the results ... </li>
</ul>

<p>We could have also/instead parsed the results as <code>text</code>:</p>
<pre data-line="1, 3, 5, 7, 9, 11, 13,15,17,19,21,23,25,27" class="language-javascript line-numbers">
<code>
let textResult = await response.text();
console.log(textResult)
</code>
</pre>
<p>But... if you look in the console.. it is one big string which is annoying because it is SUPER CUMBERSOME to extract the meaningful data... 
<br/>so because the data is saved as <code>json</code> - we want it parsed as json :) - so put back the previous...</p>
<pre data-line="1, 3, 5, 7, 9, 11, 13,15,17,19,21,23,25,27" class="language-javascript line-numbers">
<code>
 let parsedResultJS = await response.json();
 console.log(parsedResultJS)
</code>
</pre>
<p>Now that the json has been parsed into a js object and we know how to extract what we need :) woohoo ... 
<br/>So, lets look at how we can dynamically build some html output:</p>
<pre data-line="1, 3, 5, 7, 9, 11, 13,15,17,19,21,23,25,27" class="language-javascript line-numbers">
<code>
  function displayResults(parsedResultJS){
    for (let i=0; i< parsedResultJS.length; i++){
        console.log(parsedResultJS)
        
        //the object
        let donutObj = parsedResultJS[i];
        //container
        let containerDiv = document.createElement("div");
        containerDiv.classList.add("donutItem");
        document.querySelector("#output").appendChild(containerDiv);
     
        let title = document.createElement("h3");
        title.textContent = donutObj.name;
        containerDiv.appendChild(title)

        //access the image
        let donutImage = document.createElement("img");
        donutImage.src = donutObj.image;
        containerDiv.appendChild(donutImage)
     }

}
</code>
</pre>
<p>And then call <code> displayResults(parsedResultJS)</code> at the end of the <code>try{}</code>.
<br/>What is important - is that now our data is <strong>SEPERATE</strong> from the layout(css and html).
<br/>This is useful - because often times you will be loading content from external sources and the html content will need to be generated on the fly :) ... 
<br>There are frameworks that make the dynamic generation of HTML much easier and fluid - (vue.js, react.js ...) but that is beyond the scope of this particular class..
<br/>Note - if we add another donut ..into the json - it will be automatically rendered... i.e. add the following to the json file (at the end of the array) and test:</p>
<pre data-line="1, 3, 5, 7, 9, 11, 13,15,17,19,21,23,25,27" class="language-javascript line-numbers">
<code>
{
        "id": "0004",
        "type": "donut",
        "name": "New",
        "image": "../images/donuts/donut_e.png",
        "flavours": [
            {
                "id": "1001",
                "type": "Regular"
            },
            {
                "id": "1005",
                "type": "Coffee"
            }
        ],
        "toppings": [
            "None",
            "Glazed",
            "Chocolate",
            "Maple"
        ]
    }
</code>
</pre>
<h4>Using Fetch with public API's</h4>
<p>Let's look at an example of how you might fetch data from a <span class = "customP">public API</span> (e.g., JSONPlaceholder, a fake online REST API used for testing and prototyping).:</p>
<ul>
  <li> Start with the HTML page: <code>JSONANdFetchII.html</code></li>
  <li> Linked to that page is the javascript:<code>jsonFetchII.js</code></li>
  <li>Next: add in the following code to <code>fetch</code> data from the remote resource:
    <pre data-line="1, 3, 5, 7, 9, 11, 13,15,17,19,21,23,25,27" class="language-javascript line-numbers">
  <code>
    try {
    let response = await fetch("https://jsonplaceholder.typicode.com/posts"); //response
    let posts = await response.json();
    console.log(posts);
    for(let i = 0; i<10; i++){
        document.querySelector("#output_rev").innerHTML +=
        `<p><span style = background:#3c66b8;color:white;>POST ${i} title:</span>  ${posts[i].title}</p>`
    }
  } catch (err) {
    console.log(err);
  }
  </code>
  </pre>
    </li>
</ul>
<p>We used the <code>fetch()</code> function to send a GET request to the https://jsonplaceholder.typicode.com/posts endpoint :)
<br>Any errors that occur during the fetch operation are caught in the <code>.catch()</code> block.</p>
<p>Let's do a last example - because of course it is absolutely necessary to access a public API for <span class = "customP">cats</span>:)</p>
<p> The website to access is: <code> https://cataas.com/</code> and there are alot of different options for accessing a cat ...
<br>An example: 
   <pre data-line="1, 3, 5, 7, 9, 11, 13,15,17,19,21,23,25,27" class="language-javascript line-numbers">
  <code>
   try{

    let urlA = `https://cataas.com/cat/gif/says/Hello?filter=mono&fontColor=orange&fontSize=20&type=square&json=true`
    let urlB = `https://cataas.com/cat?json=true`
    //
    let response = await fetch(urlB) //response
    let cat = await response.json();
    console.log(cat)
    displayOnSite(cat.url)

    }
     catch (err) {
     console.log(err);
 }

 function displayOnSite(path){
    console.log(path)
    document.querySelector("#output_rev").innerHTML += `<img style = "width:90%"src= ${path} />`
 }
  </code>
  </pre>

</section>
</main>
  <script src="js/prism.js"></script>
</body>

</html>